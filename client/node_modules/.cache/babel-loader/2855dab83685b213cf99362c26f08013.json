{"remainingRequest":"/Users/aryhaashaari/Documents/privy_internship/privypass-personal-project/client/node_modules/babel-loader/lib/index.js!/Users/aryhaashaari/Documents/privy_internship/privypass-personal-project/client/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/aryhaashaari/Documents/privy_internship/privypass-personal-project/client/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/aryhaashaari/Documents/privy_internship/privypass-personal-project/client/src/views/Login.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/aryhaashaari/Documents/privy_internship/privypass-personal-project/client/src/views/Login.vue","mtime":1720699913828},{"path":"/Users/aryhaashaari/Documents/privy_internship/privypass-personal-project/client/babel.config.js","mtime":1719893251388},{"path":"/Users/aryhaashaari/Documents/privy_internship/privypass-personal-project/client/node_modules/cache-loader/dist/cjs.js","mtime":1719893886399},{"path":"/Users/aryhaashaari/Documents/privy_internship/privypass-personal-project/client/node_modules/babel-loader/lib/index.js","mtime":1719893886606},{"path":"/Users/aryhaashaari/Documents/privy_internship/privypass-personal-project/client/node_modules/cache-loader/dist/cjs.js","mtime":1719893886399},{"path":"/Users/aryhaashaari/Documents/privy_internship/privypass-personal-project/client/node_modules/vue-loader-v16/dist/index.js","mtime":1719893886593}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tZXhjZXB0aW9uLnN0YWNrLmpzIjsKaW1wb3J0IHsgcmVmIH0gZnJvbSAidnVlIjsKaW1wb3J0IHsgc3VwYWJhc2UgfSBmcm9tICIuLi9zdXBhYmFzZS9pbml0IjsKaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAidnVlLXJvdXRlciI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JzsKaW1wb3J0IENyeXB0b0pTIGZyb20gJ2NyeXB0by1qcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAibG9naW4iLAogIHNldHVwKCkgewogICAgLy8gQ3JlYXRlIGRhdGEgLyB2YXJzCiAgICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTsKICAgIGNvbnN0IGVtYWlsID0gcmVmKG51bGwpOwogICAgY29uc3QgcGFzc3dvcmQgPSByZWYobnVsbCk7CiAgICBjb25zdCBlcnJvck1zZyA9IHJlZihudWxsKTsKICAgIHZhciB0b2tlbiA9IHJlZihudWxsKTsKICAgIGNvbnN0IGdlbmVyYXRlVGltZXN0YW1wID0gKCkgPT4gewogICAgICByZXR1cm4gbW9tZW50KCkuZm9ybWF0KCJZWVlZLU1NLUREVEhIOm1tOnNzWiIpOwogICAgfTsKICAgIGNvbnN0IGdlbmVyYXRlU2lnbmF0dXJlID0gKHRpbWVzdGFtcCwgbWV0aG9kLCBqc29uX2JvZHlfcmF3LCB4X2FwaV9rZXlfaWQsIHhfYXBpX2tleV9zZWNyZXQpID0+IHsKICAgICAgaWYgKGpzb25fYm9keV9yYXcgJiYgT2JqZWN0LmtleXMoSlNPTi5wYXJzZShqc29uX2JvZHlfcmF3KSkubGVuZ3RoICE9PSAwKSB7CiAgICAgICAganNvbl9ib2R5X3JhdyA9IGpzb25fYm9keV9yYXcucmVwbGFjZSgvXG4vZywgIiIpLnJlcGxhY2UoL1xcL2csICIiKS5yZXBsYWNlKC9ccy9nLCAiIik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAganNvbl9ib2R5X3JhdyA9ICIiOwogICAgICB9CiAgICAgIGNvbnN0IGJvZHlfbWQ1ID0gQ3J5cHRvSlMuTUQ1KGpzb25fYm9keV9yYXcpLnRvU3RyaW5nKENyeXB0b0pTLmVuYy5CYXNlNjQpOwogICAgICBjb25zdCBobWFjX3NpZ25hdHVyZSA9IGAke3RpbWVzdGFtcH06JHt4X2FwaV9rZXlfaWR9OiR7bWV0aG9kfToke2JvZHlfbWQ1fWA7CiAgICAgIGNvbnN0IGhtYWMgPSBDcnlwdG9KUy5IbWFjU0hBMjU2KGhtYWNfc2lnbmF0dXJlLCB4X2FwaV9rZXlfc2VjcmV0KTsKICAgICAgY29uc3QgaG1hY19iYXNlNjQgPSBobWFjLnRvU3RyaW5nKENyeXB0b0pTLmVuYy5CYXNlNjQpOwogICAgICBsZXQgc2lnbmF0dXJlID0gYCMke3hfYXBpX2tleV9pZH06IyR7aG1hY19iYXNlNjR9YDsKICAgICAgcmV0dXJuIGJ0b2Eoc2lnbmF0dXJlKTsKICAgIH07CgogICAgLy8gTG9naW4gZnVuY3Rpb24KICAgIGNvbnN0IGxvZ2luID0gYXN5bmMgKCkgPT4gewogICAgICB0cnkgewogICAgICAgIGNvbnN0IHsKICAgICAgICAgIGVycm9yCiAgICAgICAgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguc2lnbkluKHsKICAgICAgICAgIGVtYWlsOiBlbWFpbC52YWx1ZSwKICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZC52YWx1ZQogICAgICAgIH0pOwogICAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7CgogICAgICAgIC8vIEdlbmVyYXRlIHRpbWVzdGFtcCBhbmQgc2lnbmF0dXJlCiAgICAgICAgY29uc3QgdGltZXN0YW1wID0gZ2VuZXJhdGVUaW1lc3RhbXAoKTsKICAgICAgICBjb25zdCBtZXRob2QgPSAnR0VUJzsgLy8gQXNzdW1pbmcgR0VUIHJlcXVlc3QKICAgICAgICBjb25zdCBqc29uX2JvZHlfcmF3ID0gJyc7IC8vIEFzc3VtaW5nIGVtcHR5IGJvZHkgZm9yIEdFVCByZXF1ZXN0CiAgICAgICAgY29uc3QgeF9hcGlfa2V5X2lkID0gJzg1OTg1OGM3LWNlZjEtNDhmZS1iYTgxLTJkNjZmNmFlODk5OCc7IC8vIFJlcGxhY2Ugd2l0aCBhY3R1YWwgQVBJIGtleSBJRAogICAgICAgIGNvbnN0IHhfYXBpX2tleV9zZWNyZXQgPSAnYXJ5aGEzMTcxMDIxNTA5MDMxMTAxJzsgLy8gUmVwbGFjZSB3aXRoIGFjdHVhbCBBUEkga2V5IHNlY3JldAogICAgICAgIGNvbnN0IHNpZ25hdHVyZSA9IGdlbmVyYXRlU2lnbmF0dXJlKHRpbWVzdGFtcCwgbWV0aG9kLCBqc29uX2JvZHlfcmF3LCB4X2FwaV9rZXlfaWQsIHhfYXBpX2tleV9zZWNyZXQpOwoKICAgICAgICAvLyBNYWtlIEdFVCByZXF1ZXN0IHdpdGggYXhpb3MKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldCgnaHR0cDovL2xvY2FsaG9zdDo4MDgwL2xvZ2luJywgewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAnWC1BcGktS2V5LUlkJzogeF9hcGlfa2V5X2lkLAogICAgICAgICAgICAnVGltZXN0YW1wJzogdGltZXN0YW1wLAogICAgICAgICAgICAnU2lnbmF0dXJlJzogc2lnbmF0dXJlCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdG9rZW4gPSByZXNwb25zZS5kYXRhLmRhdGEudG9rZW47CiAgICAgICAgY29uc29sZS5sb2coJ0FQSSByZXNwb25zZTonLCByZXNwb25zZS5kYXRhKTsKICAgICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiAiSG9tZSIKICAgICAgICB9KTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBlcnJvck1zZy52YWx1ZSA9IGBFcnJvcjogJHtlcnJvci5tZXNzYWdlfWA7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICBlcnJvck1zZy52YWx1ZSA9IG51bGw7CiAgICAgICAgfSwgNTAwMCk7CiAgICAgIH0KICAgIH07CiAgICByZXR1cm4gewogICAgICB0b2tlbiwKICAgICAgZW1haWwsCiAgICAgIHBhc3N3b3JkLAogICAgICBlcnJvck1zZywKICAgICAgbG9naW4KICAgIH07CiAgfQp9Ow=="},{"version":3,"names":["ref","supabase","useRouter","axios","moment","CryptoJS","name","setup","router","email","password","errorMsg","token","generateTimestamp","format","generateSignature","timestamp","method","json_body_raw","x_api_key_id","x_api_key_secret","Object","keys","JSON","parse","length","replace","body_md5","MD5","toString","enc","Base64","hmac_signature","hmac","HmacSHA256","hmac_base64","signature","btoa","login","error","auth","signIn","value","response","get","headers","data","console","log","push","message","setTimeout"],"sources":["/Users/aryhaashaari/Documents/privy_internship/privypass-personal-project/client/src/views/Login.vue"],"sourcesContent":["<template>\n  <div class=\"max-w-screen-sm mx-auto px-4 py-10\">\n    <!-- Error Handling -->\n     <div v-if=\"errorMsg\" class=\"mb-10 p-4 rounded-md bg-grey\">\n      <p class=\"text-red-500\">{{ errorMsg }}</p>\n     </div>\n\n     <!-- Login -->\n      <form @submit.prevent=\"login\" class=\"p-8 flex flex-col bg-grey rounded-md shadow-lg\">\n        <h1 class=\"text-3xl text-black mb-4\">Login</h1>\n\n        <div class=\"flex flex-col mb-2\">\n          <label for=\"email\" class=\"mb-1 text-sm text-black\">Email</label>\n          <input type=\"text\" required class=\"p-2 text-gray-500 focus:outline-none\" id=\"email\" v-model=\"email\">\n        </div>\n\n        <div class=\"flex flex-col mb-2\">\n          <label for=\"password\" class=\"mb-1 text-sm text-black\">Password</label>\n          <input type=\"password\" required class=\"p-2 text-gray-500 focus:outline-none\" id=\"password\" v-model=\"password\">\n        </div>\n\n        <button type=\"submit\" class=\"mt-6 py-2 px-6 rounded-sm self-start text-sm text-white bg-black duration-200 \n        border-solid border-2 border-transparent hover:border-black hover:bg-white hover:text-black\">Login</button>\n\n        <router-link class=\"text-sm mt-6 text-center\" :to=\"{name: 'Register'}\">\n          Don't have an account? <span class=\"text-white\">Register</span>\n        </router-link>\n      </form>\n  </div>\n</template>\n\n<script>\nimport { ref } from \"vue\";\nimport { supabase } from \"../supabase/init\";\nimport { useRouter } from \"vue-router\";\nimport axios from 'axios';\nimport moment from 'moment';\nimport CryptoJS from 'crypto-js';\n\nexport default {\n  name: \"login\",\n  setup() {\n    // Create data / vars\n    const router = useRouter();\n    const email = ref(null);\n    const password = ref(null);\n    const errorMsg = ref(null);\n    var token = ref(null);\n\n    const generateTimestamp = () => {\n      return moment().format(\"YYYY-MM-DDTHH:mm:ssZ\");\n    };\n\n    const generateSignature = (timestamp, method, json_body_raw, x_api_key_id, x_api_key_secret) => {\n      if (json_body_raw && Object.keys(JSON.parse(json_body_raw)).length !== 0) {\n        json_body_raw = json_body_raw.replace(/\\n/g, \"\").replace(/\\\\/g, \"\").replace(/\\s/g, \"\");\n      } else {\n        json_body_raw = \"\";\n      }\n\n      const body_md5 = CryptoJS.MD5(json_body_raw).toString(CryptoJS.enc.Base64);\n      const hmac_signature = `${timestamp}:${x_api_key_id}:${method}:${body_md5}`;\n      const hmac = CryptoJS.HmacSHA256(hmac_signature, x_api_key_secret);\n      const hmac_base64 = hmac.toString(CryptoJS.enc.Base64);\n      let signature = `#${x_api_key_id}:#${hmac_base64}`;\n      return btoa(signature);\n    };\n\n\n    // Login function\n    const login = async() => {\n      try {\n        const {error} = await supabase.auth.signIn({\n          email: email.value,\n          password: password.value,\n        });\n        if (error) throw error;\n\n        // Generate timestamp and signature\n        const timestamp = generateTimestamp();\n        const method = 'GET'; // Assuming GET request\n        const json_body_raw = ''; // Assuming empty body for GET request\n        const x_api_key_id = '859858c7-cef1-48fe-ba81-2d66f6ae8998'; // Replace with actual API key ID\n        const x_api_key_secret = 'aryha3171021509031101'; // Replace with actual API key secret\n        const signature = generateSignature(timestamp, method, json_body_raw, x_api_key_id, x_api_key_secret);\n\n        // Make GET request with axios\n        const response = await axios.get('http://localhost:8080/login', {\n          headers: {\n            'X-Api-Key-Id': x_api_key_id,\n            'Timestamp': timestamp,\n            'Signature': signature\n          }\n        });\n\n        token =  response.data.data.token\n        console.log('API response:', response.data);\n        router.push({name: \"Home\"});\n      } catch (error) {\n        errorMsg.value = `Error: ${error.message}`;\n        setTimeout(() => {\n        errorMsg.value = null;\n      }, 5000);\n      }\n\n  \n    }\n\n    return {token, email, password, errorMsg, login};\n  },\n};\n</script>\n"],"mappings":"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","ignoreList":[]}]}